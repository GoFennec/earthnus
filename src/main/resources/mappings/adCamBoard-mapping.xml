<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.earthnus.user.camBoard.CamBoardMybatis">
	
	<resultMap id="camBoardResult" type="camBoard">
		<id property="CAMB_NUM" column="CAMB_NUM"/>
		<result property="CAMB_NAME" column="CAMB_NAME"/>
		<result property="CAMB_SUBJECT" column="CAMB_SUBJECT"/>
		<result property="CAMB_CONTENT" column="CAMB_CONTENT"/>
		<result property="CAMB_FILE" column="CAMB_FILE"/>
		<result property="CAMB_DATE" column="CAMB_DATE"/>
	</resultMap>
	
	<select id="getCamBoardListEntire" resultMap="camBoardResult">
		<![CDATA[
			SELECT * FROM CAMBOARD WHERE (CAMB_NAME LIKE #{search} AND (CAMB_DATE>SYSDATE() OR CAMB_DATE<SYSDATE())) ORDER BY CAMB_NUM DESC LIMIT #{contentnum} OFFSET #{pagenum} 
		]]>
	</select>
	
	<select id="getCamBoardListDoing" resultMap="camBoardResult">
		<![CDATA[
			SELECT * FROM CAMBOARD WHERE (CAMB_NAME LIKE #{search} AND CAMB_DATE>SYSDATE()) ORDER BY CAMB_NUM DESC LIMIT #{contentnum} OFFSET #{pagenum} 
		]]>
	</select>
	
	<select id="getCamBoardListEnd" resultMap="camBoardResult">
		<![CDATA[
			SELECT * FROM CAMBOARD WHERE (CAMB_NAME LIKE #{search} AND CAMB_DATE<SYSDATE()) ORDER BY CAMB_NUM DESC LIMIT #{contentnum} OFFSET #{pagenum} 
		]]>
	</select>
		
	<select id="getCamBoard" resultMap="camBoardResult">
		<![CDATA[
			SELECT * FROM CAMBOARD WHERE CAMB_NUM=#{contentnum}
		]]>
	</select>
	
	<select id="camBoardEntireCount" resultType="int">
		<![CDATA[
			SELECT COUNT(*) FROM CAMBOARD WHERE (CAMB_NAME LIKE #{search} AND (CAMB_DATE>SYSDATE() OR CAMB_DATE<SYSDATE())) ORDER BY CAMB_NUM DESC LIMIT #{contentnum} OFFSET #{pagenum}
		]]>
	</select>
	
	<select id="camBoardDoingCount" resultType="int">
		<![CDATA[
			SELECT COUNT(*) FROM CAMBOARD WHERE (CAMB_NAME LIKE #{search} AND CAMB_DATE>SYSDATE()) ORDER BY CAMB_NUM DESC LIMIT #{contentnum} OFFSET #{pagenum}
		]]>
	</select>
	
	<select id="camBoardEndCount" resultType="int">
		<![CDATA[
			SELECT COUNT(*) FROM CAMBOARD WHERE (CAMB_NAME LIKE #{search} AND CAMB_DATE<SYSDATE()) ORDER BY CAMB_NUM DESC LIMIT #{contentnum} OFFSET #{pagenum}
		]]>
	</select>
	
	<update id="camBoardUpdate">
		<![CDATA[
			UPDATE CAMBOARD SET CAMB_NAME = #{CAMB_NAME}, CAMB_SUBJECT = #{CAMB_SUBJECT}, CAMB_CONTENT = #{CAMB_CONTENT}, CAMB_FILE = #{CAMB_FILE}
		]]>
	</update>
	
	<insert id="camBoardInsert">
		<![CDATA[
			INSERT INTO CAMBOARD (CAMB_NAME, CAMB_SUBJECT, CAMB_CONTENT, CAMB_FILE) VALUES(#{CAMB_NAME}, #{CAMB_SUBJECT}, #{CAMB_CONTENT}, #{CAMB_FILE})
		]]>
	</insert>
	
	<delete id="camBoardDelete">
		<![CDATA[
			DELETE FROM CAMBOARD WHERE CAMB_NUM = #{CAMB_NUM}
		]]>
	</delete>
</mapper>