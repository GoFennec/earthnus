<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.earthnus.admin.auth.AdAuthMybatis">

	<resultMap id="adAuthResult" type="adAuth">
		<id property="auth_id" column="AUTH_ID"/>
		<result property="auth_name" column="AUTH_NAME"/>
	</resultMap>

	<resultMap id="adMemberResult" type="adMember">
		<id property="ad_id" column="AD_ID"/>
		<result property="ad_pw" column="AD_PW"/>
		<result property="ad_name" column="AD_NAME"/>
		<result property="ad_addr" column="AD_ADDR"/>
		<result property="ad_tel" column="AD_TEL"/>
		<result property="ad_birth" column="AD_BIRTH"/>
		<result property="ad_gender" column="AD_GENDER"/>
		<result property="ad_email" column="AD_EMAIL"/>
		<result property="ad_date" column="AD_DATE"/>
		<result property="ad_role" column="AD_ROLE"/>
	</resultMap>
	
	<select id="selectByAdId" resultType="adMember" parameterType="String">
		SELECT * FROM ADMEMBER WHERE AD_ID=#{auth_id}
	</select>
	
	<select id="selectPlastic" resultType="int">
		SELECT COUNT(*) FROM PAY WHERE PAY_DNAME='플라스틱 줄이기' OR PAY_DNAME='해양 청소' OR PAY_DNAME='대지 청소' OR PAY_DNAME='친환경'
	</select>
	
	<select id="selectOcean" resultType="int">
		SELECT COUNT(*) FROM PAY WHERE PAY_DNAME='조개' OR PAY_DNAME='새우' OR PAY_DNAME='문어' OR PAY_DNAME='바다'
	</select>
	
	<select id="selectIce" resultType="int">
		SELECT COUNT(*) FROM PAY WHERE PAY_DNAME='작은 얼음' OR PAY_DNAME='큰 얼음' OR PAY_DNAME='빙하 조각' OR PAY_DNAME='빙하'
	</select>
	
	<select id="selectForest" resultType="int">
		SELECT COUNT(*) FROM PAY WHERE PAY_DNAME='새싹' OR PAY_DNAME='묘목' OR PAY_DNAME='나무' OR PAY_DNAME='숲'
	</select>
	
	<insert id="insertVisitor" parameterType="visit">
            INSERT
            INTO VISITOR
            (
                VISIT_IP,
                VISIT_TIME,
                VISIT_AGENT
            )
            VALUES
            (
                #{visit_ip},
                now(),
                #{visit_agent}
            )
     </insert>
	
</mapper>